# Инструкция: HTML5 Игра-Викторина по Правилам Футбола

## Описание проекта

HTML5 игра-викторина для изучения 17 правил футбола (курсы судьи). Игра работает локально без необходимости сервера.

## Структура игры

### 17 Правил футбола (FIFA/IFAB)

1. **Das Spielfeld** - Поле для игры
2. **Der Ball** - Мяч
3. **Die Spieler** - Игроки
4. **Die Ausrüstung der Spieler** - Экипировка игроков
5. **Der Schiedsrichter** - Судья
6. **Die weiteren Spieloffiziellen** - Другие официальные лица матча
7. **Die Dauer des Spiels** - Продолжительность игры
8. **Beginn und Fortsetzung des Spiels** - Начало и возобновление игры
9. **Ball im Spiel und außer Spiel** - Мяч в игре и вне игры
10. **Wie ein Tor erzielt wird** - Как засчитывается гол
11. **Abseits** - Положение "вне игры"
12. **Fouls und unsportliches Betragen** - Нарушения и недисциплинированное поведение
13. **Freistöße** - Штрафные удары
14. **Strafstoß** - Пенальти
15. **Einwurf** - Вбрасывание мяча
16. **Abstoß** - Удар от ворот
17. **Eckstoß** - Угловой удар

## Механика игры

### Счетчики

На экране отображаются три счетчика:

- **Черный (по центру)**: Количество оставшихся вопросов в текущем раунде
- **Зеленый (слева)**: Количество правильно отвеченных вопросов
- **Красный (справа)**: Количество неправильно отвеченных вопросов

### Логика работы

#### Этап 1: Первичный проход
1. Пользователь отвечает на все 17 вопросов
2. При правильном ответе:
   - Зеленый счетчик +1
   - Черный счетчик -1
3. При неправильном ответе:
   - Красный счетчик +1
   - Черный счетчик -1
4. Этап завершается, когда черный счетчик = 0

#### Этап 2: Повтор неправильных ответов
1. Все вопросы, на которые был дан неправильный ответ, повторяются
2. Черный счетчик устанавливается в количество неправильных ответов
3. Зеленый и красный счетчики сохраняют свои значения
4. Процесс повторяется до тех пор, пока черный счетчик не станет 0

#### Этап 3: Финальный повтор
1. Если после этапа 2 остались неправильные ответы, они повторяются
2. Процесс продолжается до тех пор, пока красный счетчик не станет 0
3. Когда красный счетчик = 0, все вопросы отвечены правильно

#### Цикл повторения
Весь процесс (Этап 1 → Этап 2 → Этап 3) повторяется **три раза**.

## Функции игры

### Основные функции

#### `initGame()`
- Инициализирует игру
- Устанавливает начальные значения счетчиков
- Загружает первый вопрос
- Сбрасывает все массивы и переменные состояния

#### `loadQuestion()`
- Отображает текущий вопрос
- Показывает 4 варианта ответа
- Обновляет счетчик текущего вопроса

#### `checkAnswer(selectedIndex)`
- Проверяет выбранный ответ
- Обновляет счетчики (зеленый/красный/черный)
- Сохраняет неправильные ответы для повторения
- Переходит к следующему вопросу или этапу

#### `updateCounters()`
- Обновляет отображение всех трех счетчиков на экране
- Синхронизирует визуальное состояние с логикой игры

#### `startNextRound()`
- Определяет, какой этап игры следующий
- Переключается между первичным проходом и повторением неправильных ответов
- Управляет циклом из трех раундов

#### `resetForNewRound()`
- Сбрасывает счетчики для нового раунда
- Сохраняет статистику предыдущего раунда
- Инициализирует новый набор вопросов

#### `handleRoundCompletion()`
- Обрабатывает завершение текущего раунда
- Проверяет, нужно ли повторять неправильные ответы
- Определяет, завершена ли игра (3 раунда)

#### `showResults()`
- Отображает финальные результаты игры
- Показывает статистику по всем трем раундам
- Предлагает начать игру заново

### Вспомогательные функции

#### `shuffleArray(array)`
- Перемешивает массив вопросов для случайного порядка
- Использует алгоритм Fisher-Yates

#### `getIncorrectQuestions()`
- Возвращает массив вопросов, на которые был дан неправильный ответ
- Используется для этапа повторения

#### `saveProgress()`
- Сохраняет текущий прогресс в localStorage (опционально)
- Позволяет продолжить игру после перезагрузки страницы

#### `loadProgress()`
- Загружает сохраненный прогресс из localStorage
- Восстанавливает состояние игры

## Структура данных

### Объект вопроса
```javascript
{
    id: number,              // Уникальный идентификатор
    rule: number,            // Номер правила (1-17)
    question: string,        // Текст вопроса
    options: [string],       // Массив из 4 вариантов ответа
    correctAnswer: number,   // Индекс правильного ответа (0-3)
    answered: boolean,       // Был ли вопрос отвечен
    correct: boolean        // Был ли ответ правильным
}
```

### Состояние игры
```javascript
{
    currentRound: number,           // Текущий раунд (1-3)
    currentPhase: string,           // 'initial' | 'review' | 'final'
    currentQuestionIndex: number,   // Индекс текущего вопроса
    questions: [Question],          // Все вопросы
    incorrectQuestions: [Question], // Неправильно отвеченные вопросы
    blackCounter: number,           // Черный счетчик
    greenCounter: number,           // Зеленый счетчик
    redCounter: number,            // Красный счетчик
    roundStats: [                  // Статистика по раундам
        {
            round: number,
            totalQuestions: number,
            correctAnswers: number,
            incorrectAnswers: number
        }
    ]
}
```

## Интерфейс пользователя

### Элементы интерфейса

1. **Заголовок игры**: "Курсы судьи - Правила футбола"
2. **Счетчики**: Три счетчика в ряд (зеленый | черный | красный)
3. **Область вопроса**: Отображение текущего вопроса
4. **Варианты ответов**: 4 кнопки с вариантами ответа
5. **Индикатор прогресса**: Показывает текущий раунд и этап
6. **Кнопка "Начать заново"**: Сброс игры

### Стилизация

- Современный, чистый дизайн
- Четкое визуальное разделение элементов
- Цветовая индикация счетчиков
- Адаптивный дизайн для разных размеров экрана
- Анимации при изменении счетчиков

## Технические требования

- **Формат**: Один HTML файл со встроенными CSS и JavaScript
- **Зависимости**: Нет внешних библиотек
- **Браузеры**: Современные браузеры (Chrome, Firefox, Safari, Edge)
- **Хранение**: Локальное (localStorage для сохранения прогресса)

## Логика циклов

### Алгоритм работы

```
ЦИКЛ (3 раунда):
    ФАЗА 1: Первичный проход
        Пока черный счетчик > 0:
            Показать вопрос
            Получить ответ
            Если правильный: зеленый+1, черный-1
            Если неправильный: красный+1, черный-1
            Сохранить неправильные вопросы
    
    ФАЗА 2: Повтор неправильных
        Пока есть неправильные вопросы И черный счетчик > 0:
            Показать неправильный вопрос
            Получить ответ
            Если правильный: зеленый+1, черный-1, удалить из неправильных
            Если неправильный: красный+1, черный-1, оставить в неправильных
    
    ФАЗА 3: Финальный повтор (если нужно)
        Пока красный счетчик > 0:
            Повторить ФАЗУ 2
    
    Сбросить счетчики для следующего раунда
КОНЕЦ ЦИКЛА
```

## Примеры вопросов

Каждый вопрос должен быть связан с одним из 17 правил и иметь 4 варианта ответа, один из которых правильный.

Пример:
- **Правило 1 (Das Spielfeld)**
- Вопрос: "Какова минимальная ширина футбольного поля?"
- Варианты: ["60 метров", "64 метра", "68 метров", "70 метров"]
- Правильный ответ: "64 метра"

## Запуск игры

1. Откройте файл `fußball-quiz.html` в любом современном браузере
2. Игра запустится автоматически
3. Начните отвечать на вопросы
4. Следите за счетчиками и проходите все три раунда

## Дополнительные возможности (опционально)

- Звуковые эффекты при правильных/неправильных ответах
- Таймер на каждый вопрос
- Статистика времени прохождения
- Экспорт результатов
- Темная/светлая тема оформления

